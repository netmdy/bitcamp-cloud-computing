<!DOCTYPE html>
<html>
<head>
<meta charset='UTF-8'>
<title>게시물 보기</title>
</head>
<body>
<h1>게시물 보기</h1>
<form action='../update' method='post'>
<table border='1'>
<tr><th>번호</th><td>
    <input type='text' id='eNo' readonly></td></tr>
<tr><th>제목</th>
    <td><input type='text' id='eTitle'></td></tr>
<tr><th>내용</th>
    <td><textarea id='eCont' rows='10' cols='60'></textarea></td></tr>
<tr><th>등록일</th><td id='eCdt'></td></tr>
<p>

   <button id="eListBtn" type="button">목록</button>
   <button id-"eUpdateBtn" type="button">변경</button>
   <button id="eDeleteBtn" type="button">삭제</button>
   </p>
   </form>
<script type="text/javascript" src="../js/common.js"></script>
<script type="text/javascript">
"use strict"

var data = null;

var {no, page, size} = parseQuery(location.href);

if (no == undefined){
    alert("해당 게시물이 없습니다.");
    location.href = "list.html";
}else{
     var xhr = new XMLHttpRequest();
    
    xhr.onreadystatechange = function(){
    
      if (xhr.readyState < 4) return;
      if (xhr.status != 200){
          alert("오류 발생 ㅇㅅㅇ");
          return;
      }
     
        data = JSON.parse(xhr.responseText);
        if (data.board == null){
            alert('게시물이 없습니다.');
            location.href = "list.html";
            return;
        }
        eNo.value = data.board.bno;
        eTitle.value = data.board.titl;
        eCont.value = data.board.cont;
        eCdt.innerHTML = `<td>${data.board.cdt}</td>`;
    
    };
    
    xhr.open('GET',
            `../../json/board/view/${no}`,true);
    xhr.send();
}
eListBtn.onclick = function() {
    location.href = `list.html?page=${page}&size=${size}`;
}
</script>

</body>
</html>
